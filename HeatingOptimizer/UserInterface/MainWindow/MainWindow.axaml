<Window
  xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:lvc="using:LiveChartsCore.SkiaSharpView.Avalonia"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:vms="using:HeatingOptimizer.ViewModels"
  mc:Ignorable="d" d:DesignWidth="1000" d:DesignHeight="600"
  x:DataType="vms:MainWindowViewModel"
  x:Class="HeatingOptimizer.UI.MainWindow"
  Title="Super Optimizing Power Heating System">

  <Window.DataContext>
    <vms:MainWindowViewModel />
  </Window.DataContext>

  <DockPanel>
    <Menu HorizontalAlignment="Stretch" DockPanel.Dock="Top">
      <!-- <StackPanel Orientation="Horizontal" DockPanel.Dock="Top"> -->
      <MenuItem Header="File" Classes="optionBar" HorizontalAlignment="Stretch">
        <MenuItem Header="Open Timeframe Data" Click="BrowseFile" HotKey="Ctrl+o" />
        <MenuItem Header="Load Data" Click="LoadButton_Click" />
        <MenuItem Header="Save" />
      </MenuItem>
      <MenuItem Classes="optionBar" Header="Edit Machine info" Click="EditFile" />
    </Menu>
    
    <!--Main code begins here-->
    <SplitView
      IsPaneOpen="{Binding IsPaneOpen}" DisplayMode="Overlay"
      CompactPaneLength="20" PanePlacement="Right" PaneBackground="Bisque" OpenPaneLength="300">
      <SplitView.Pane>
        <DockPanel x:Name="SplitPane" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                   Height="{Binding $parent[SplitView].Bounds.Height}">
          <Button DockPanel.Dock="Top" Foreground="Black"
                  Command="{Binding PaneInteractionCommand}"
                  HorizontalAlignment="Center" VerticalAlignment="Top">
            Close panel
          </Button>
          <ListBox ItemsSource="{Binding AllSeries}" SelectedItems="{Binding SelectedSeries}"
                   DockPanel.Dock="Top" SelectionMode="Multiple, Toggle">
            <ListBox.ItemsPanel>
              <ItemsPanelTemplate>
                <WrapPanel Background="Bisque" />
              </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBox.ItemTemplate>
              <DataTemplate>
                <Border CornerRadius="4" Padding="4" BorderBrush="Navy" BorderThickness="2">
                  <TextBlock Text="{Binding Name}" Foreground="Black" />
                </Border>
              </DataTemplate>
            </ListBox.ItemTemplate>
          </ListBox>
        </DockPanel>
      </SplitView.Pane>
      
      <!-- MainPage content begins here -->
      <SplitView.Content>
        <!--
        <ScrollViewer HorizontalAlignment="Stretch" DockPanel.Dock="Top">
          -->
          <!-- Adding a heading (label) to a project -->
          <StackPanel Margin="20" ScrollViewer.AllowAutoHide="True"
                      ScrollViewer.VerticalScrollBarVisibility="Visible">
            <TextBlock Margin="0 5" FontSize="18" FontWeight="Bold">File entry</TextBlock>
            <TextBox Watermark="Enter the file path to the csv file"
                     Text="{Binding InputText, Mode=TwoWay}" />

            <!-- Adding a chart container (canvas) -->
            <!--
            <StackPanel Margin="20" HorizontalAlignment="Center" VerticalAlignment="Stretch">
              -->
              <!-- Adding a container for the buttons-->
              <WrapPanel Orientation="Horizontal" Margin="10" HorizontalAlignment="Center" VerticalAlignment="Stretch">
              <!-- Production Unit ListBox-->
                <ListBox x:Name="ProductionUnitsListBox"
                         SelectionMode="Multiple,Toggle"
                         ItemsSource="{Binding AllProductionUnits}"
                         SelectedItems="{Binding SelectedProductionUnits}">
                  <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                      <StackPanel Orientation="Horizontal" VerticalAlignment="Center" />
                    </ItemsPanelTemplate>
                  </ListBox.ItemsPanel>
                  <ListBox.ItemTemplate>
                    <DataTemplate>
                      <TextBlock Text="{Binding Name}" HorizontalAlignment="Center"
                                 VerticalAlignment="Center" />
                    </DataTemplate>
                  </ListBox.ItemTemplate>
                </ListBox>

                <!-- Adding the dropdown for the options -->
                <!-- SelectedItem="{Binding SelectedOption}" -->
                  <ComboBox SelectedIndex="{Binding SelectedIndex}" VerticalAlignment="Center"
                            Margin="10 0 10 0">
                    <ComboBoxItem>Cheapest</ComboBoxItem>
                    <ComboBoxItem>Most Eco Friendly(CO2)</ComboBoxItem>
                    <ComboBoxItem>Most Efficiency(Least Consumption)</ComboBoxItem>
                  </ComboBox>

                  <ListBox ItemsSource="{Binding SeasonSelection}"
                           SelectedItem="{Binding SelectedSeason}" VerticalAlignment="Center">
                    <ListBox.ItemsPanel>
                      <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" 
                                    MaxHeight="{Binding $parent[WrapPanel].Bounds.Height}"/>
                      </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                  </ListBox>
  
                <Button Margin="5" Command="{Binding GenerateButton_Click}"
                        CommandParameter="{Binding SelectedSeason}">
                  Generate
                </Button>
                <Button HorizontalAlignment="Stretch" DockPanel.Dock="Right"
                        Command="{Binding PaneInteractionCommand}">
                  Open graph selection dialog
                </Button>
                </WrapPanel>

              <ListBox ItemsSource="{Binding SelectedSeries}" HorizontalAlignment="Center"
                       VerticalAlignment="Center" >
                <ListBox.Styles>
                  <Style Selector="ListBoxItem:selected">
                    <Setter Property="Background" Value="Black"/>
                  </Style>
                </ListBox.Styles>
                
                <ListBox.ItemsPanel>
                  <ItemsPanelTemplate>
                    <WrapPanel HorizontalAlignment="Center" Margin="5 0 5 0"/>
                  </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                  <DataTemplate>
                    <Border HorizontalAlignment="Stretch" CornerRadius="10" Padding="8"
                            BorderBrush="DimGray" BorderThickness="3">
                      <StackPanel>
                        <lvc:CartesianChart
                          Width="500" Height="300" Series="{Binding Series}" ZoomMode="X" 
                          XAxes="{Binding XAxes}" YAxes="{Binding YAxes}" />
                        <!-- PointerPressedCommand="{Binding PressedCommand}" -->
                      </StackPanel>
                    </Border>
                  </DataTemplate>
                </ListBox.ItemTemplate>
              </ListBox>
            </StackPanel>
          <!--
          </StackPanel>
        -->
        <!--</ScrollViewer>-->
      </SplitView.Content>
    </SplitView>
  </DockPanel>
</Window>